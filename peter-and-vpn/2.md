# Virtual interfaces and C language

1. We need to make it work without being root. Program just need network administration privileges, not the whole root privileges. We will use the capabilities but with the C language because capabilites define privileges for an executable. If we stay with Python capabilities would be define at the interpeter level.
2. See [tun-do.c](./tunetest/tun-do.c) program. Its main purpose is to configure a TUN interface and then passes control to another program like **sudo**:
    - Line 17 we check command line invokation
    - Then we initialize a TUN interface like in Python. In line 27 we give an explicit name to our interface: **mytun**
    - From line 29 to 43 thanks to network administration privileges we define the interface IP address and *netmask*, and turn the interface on, all this through `ioctl()` calls
    - From line 44 to 47 we define environment variables and delegate to the second program via `execvp()`: the current procees is replaced by the command passed as argument
3. Compile the program:
```shell
gcc -Wall -o tun-do tun-do.c
```