# A shell to check

1. Start a shell:
```shell
 ./tun-do 192.168.3.2 bash --norc
 tun-shell>
```
- **sudo** is no longer required. `--norc` is used to prevent bash from overriding the *PS1* environment variable set at the of *tun-do.c*
2. Check we got the expected result:
```shell
tun-shell> ip addr show dev mytun
42: mytun: <POINTOPOINT,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UNKNOWN group default qlen 500
    link/none 
    inet 192.168.3.2/24 scope global mytun
       valid_lft forever preferred_lft forever
    inet6 fe80::195d:bb4f:65cf:2fa0/64 scope link stable-privacy 
       valid_lft forever preferred_lft forever
tun-shell> 
tun-shell> ls -l /proc/self/fd/3
lrwx------ 1 martin martin 64 Dec  1 09:18 /proc/self/fd/3 -> /dev/net/tun
```
- Interface **mytun** exists, it is *UP* with the IP address specified attached. The *file descriptor* 3 has been conserved.
3. Check the first steps of [A machine that responds to ping](./1.md), not the whole response loop but at the least check that we can read packets on this file descriptor:
```shell
tun-shell> .venv/bin/python
>>> import os
>>> packet_bytes = os.read(3, 4096)
>>> len(packet_bytes)
```
- We receive the packets. It's like what we experiment with the Python prototype, the OS should have generate some packets to initialiaze the interface, and it's the of this packets we just read.